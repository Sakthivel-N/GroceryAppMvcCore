@using GroceryAppMvcCore;
@using System;
@using System.Linq;
@using System.Collections.Generic;
@model OrderView
@{
    ViewBag.Title = "View_Orders";
    Layout = "~/Views/Shared/_UsersLayout.cshtml";

    int totalOrders = 0;
    int UserID = Convert.ToInt32(ViewBag.UserId);

    List<string> list = new List<string>();

    
}
@foreach (Order order in Model.Orders)
{
    if (order.UserId == UserID)
    {
        totalOrders++;
        <h1>Order Id: @order.OrderId</h1>

        string[] list1 = (order.CartIdList.Split(","));
        list1 = list1.Take(list1.Count() - 1).ToArray();
        <table>
            <tr>

                <th>CartId</th>
                <th>ProductId</th>
                <th>PurchasedQty</th>

            </tr>
            @foreach (string i in list1)

            {
                foreach (Cart cartt in Model.Carts)
                {
                    if (cartt.CartId == int.Parse(i))
                    {
                        <tr>
                            <td>@cartt.CartId</td>
                            <td>@cartt.ProductId</td>

                            <td>@cartt.PurchasedQty</td>


                        </tr>

                    }
                }


            }



        </table>
        <div>
            OrderCount : @totalOrders <br/>
            total Price :@order.TotalValue;><br/>
            @Html.ActionLink("DeleteOrder", "DeleteOrder", new { id=order.OrderId})
        </div>




    }

}

